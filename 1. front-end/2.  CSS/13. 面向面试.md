### **CSS 终极模拟面试**

**面试官**：你好，欢迎参加今天的面试。首先，请你简单谈一谈，在你看来，现代 CSS 开发的核心思想是什么？相比几年前的 CSS 写法，你觉得最大的变化在哪里？

*(请在心里或草稿上组织一下你的回答，然后我们继续下一个问题)*

---

#### **第一部分：核心基础**

**面试官**：好的，谢谢。我们从一些基础但非常重要的问题开始。

1.  **(盒模型)** 我们都知道 `box-sizing: border-box;` 是现代 CSS 开发的标配。你能否从“是什么”和“为什么”两个角度，解释它与默认的 `content-box` 的区别，以及为什么 `border-box` 是更优的选择？

2.  **(层叠与优先级)** 这里有两段 CSS 规则，请问最终 `p` 标签的文字颜色是什么？并请你详细解释浏览器是如何通过“层叠”的三大规则（重要性、优先级、源顺序）来做出这个决定的。
    ```html
    <div id="main">
      <p class="text" style="color: purple;">Hello CSS</p>
    </div>
    ``````css
    /* 规则 A */
    #main .text {
      color: blue;
    }
    
    /* 规则 B */
    div p.text {
      color: red;
    }
    ```

3.  **(单位与值)** 请详细解释 `em`, `rem`, `%` 和 `vw` 这四个单位的区别，并分别为它们举一个你认为最恰当的使用场景。

---

#### **第二部分：现代布局**

**面试官**：非常扎实的基础。现在我们来聊聊布局，这是现代 CSS 的核心。

4.  **(Flexbox vs. Grid)** 你是如何区分 Flexbox 和 Grid 的使用场景的？如果让你来实现一个典型的“上-中-下”（Header-Content-Footer）页面布局，其中“中”又分为“左-中-右”（Nav-Main-Aside）三栏，你会如何选择和搭配使用 Flexbox 与 Grid？

5.  **(Positioning 与堆叠上下文)** `position: absolute;` 的元素是相对于谁进行定位的？另外，请解释一下什么是“堆叠上下文（Stacking Context）”，以及为什么一个 `z-index` 值很高的元素，有时却无法覆盖另一个 `z-index` 值较低的元素？

---

#### **第三部分：架构与可维护性**

**面试官**：很好。能写出布局只是第一步，如何写出可维护的、团队能够协作的 CSS 同样重要。

6.  **(响应式设计)** 你如何理解“移动端优先（Mobile First）”这个概念？它在你的实际 CSS 编码中是如何体现的？

7.  **(BEM)** 你在项目中会使用像 BEM 这样的命名规范吗？请解释一下 BEM 的核心思想，以及它主要解决了原生 CSS 的哪些痛点？

8.  **(CSS 变量)** CSS 变量（自定义属性）和 Sass/Less 中的变量，最本质的区别是什么？请举一个只能用 CSS 变量而不能用 Sass 变量实现的功能。

---

#### **第四部分：进阶与前沿**

**面试官**：聊得不错。最后，我们来看一些更深入和前沿的话题。

9.  **(动画性能)** 当你需要实现一个平移动画时，为什么使用 `transform: translateX()` 的性能通常优于使用 `left` 或 `margin-left`？请从浏览器渲染原理的角度简单解释。

10. **(伪元素)** 除了添加装饰性图标，你还能举出 `::before` 或 `::after` 的至少两个高级应用场景吗？

11. **(未来 CSS)** 在容器查询 (`@container`) 和 `:has()` 选择器中，任选一个，谈谈你对它的理解，以及它解决了过去 CSS 中一个怎样的“不可能”的问题。

---

#### **第五部分：实战编码挑战**

**面试官**：好的，理论知识非常扎实。现在，我们来一起完成一个编码任务。

**任务：** 创建一个响应式的商品卡片组件。

**提供的 HTML 结构:**
```html
<div class="product-card">
  <div class="product-card__image-container">
    <img src="https://via.placeholder.com/300" alt="Product Image">
    <span class="product-card__badge">-20%</span>
  </div>
  <div class="product-card__content">
    <h3 class="product-card__title">Modern Armchair</h3>
    <p class="product-card__price">$150.00</p>
    <p class="product-card__description">A stylish and comfortable chair for your modern home.</p>
    <button class="product-card__button">Buy Now</button>
  </div>
</div>
```

**你需要编写 CSS 来满足以下所有要求：**

1.  **命名与架构**: HTML 已经遵循了 BEM 命名法。你的 CSS 也应该遵循，只使用单层类选择器。请使用 CSS 变量来定义至少 3 个颜色值（如：`--primary-color`, `--text-color`, `--card-bg`）和 1 个间距值（如：`--spacing-md`），并在你的样式中使用它们。

2.  **内部布局 (Flexbox)**:
    *   卡片 (`.product-card`) 内部的 `.product-card__content` 应为一个**垂直的 Flex 容器**。
    *   描述区域 (`.product-card__description`) 应该**自动伸展**，占据所有可用的垂直空间，从而将“购买”按钮**永远推到卡片的底部**。

3.  **定位 (Positioning)**:
    *   折扣角标 (`.product-card__badge`) 必须**完全脱离文档流**，并被精确定位在图片容器 (`.product-card__image-container`) 的**右上角**。

4.  **响应式布局 (Grid)**:
    *   假设页面上会有多个这样的卡片。在桌面端（例如，`min-width: 992px`），这些卡片应该在一个**三列的网格**中显示。
    *   在平板端（例如，`min-width: 600px`），它们应该在一个**两列的网格**中显示。
    *   在移动端（默认），它们应该**单列堆叠**，宽度为 `100%`。
    *   请使用 Grid 布局和媒体查询来实现这个响应式列表。

5.  **交互与细节 (Transition & Pseudo-elements)**:
    *   当鼠标悬停在“购买”按钮上时，它的背景色应该有一个**平滑的过渡效果**。
    *   **(挑战)** 使用 `::after` 伪元素，给“购买”按钮的文字后面添加一个小小的右箭头 `→` 作为装饰。

#### **第六部分：深度细节与边界情况**

**面试官**：好的，刚才的基础和应用题你都回答得不错。现在我想和你探讨一些更细节的问题，这些问题在处理复杂布局或进行性能优化时经常会遇到。

12. **(外边距折叠)** 我们在第一课聊过外边距折叠。现在请思考一个场景：一个父元素 `div`，它没有 `border` 和 `padding`，它的第一个子元素是一个 `h1`。如果我给这个 `h1` 设置了 `margin-top: 50px;`，在视觉上会发生什么？这个 `50px` 的外边距最终是作用在了谁身上？有哪些方法可以“阻止”这种行为的发生？

13. **(弹性布局 `flex` 简写)** 我们经常会看到 `flex: 1;`, `flex: auto;`, `flex: none;` 这三种 `flex` 的简写值。你能否详细解释一下它们分别等同于 `flex-grow`, `flex-shrink`, `flex-basis` 的什么值，以及它们在视觉表现上的核心区别是什么？

14. **(Grid vs. `inline-block`)** 在 Grid 布局出现之前，我们有时会用 `display: inline-block;` 配合 `text-align: justify;` 来实现两端对齐的响应式列表。相比这种旧的 hack 方法，使用我们第 5 课中提到的 `repeat(auto-fit, minmax(250px, 1fr))` 这种现代 Grid 方案，它最核心的优势是什么？（提示：考虑最后一行和间距处理）

15. **(可访问性 A11Y)** CSS 不仅仅关乎视觉。当一个元素在视觉上被隐藏时，我们有多种方法，比如 `display: none;`，`visibility: hidden;`，`opacity: 0;`，或者把它定位到屏幕外 `position: absolute; left: -9999px;`。这几种方法对于**屏幕阅读器（Screen Reader）**等辅助技术来说，有什么本质的区别？在什么场景下你会选择使用“视觉上隐藏但对屏幕阅读器可见”的技术？

16. **(`will-change` 属性)** 你在第九课的回答中提到了 `will-change` 属性。这是一个强大的性能优化工具，但如果滥用也会带来负面效果。你能否解释一下 `will-change` 的工作原理是什么？以及为什么我们不应该把它应用到大量的元素上？

---

#### **第七部分：逻辑与组合应用**

**面试官**：非常好，你对细节的把握很到位。现在我们来看一些需要组合多种技术来解决的逻辑性问题。

17. **(组合选择器)** 我想选中一个 `<ul>` 列表中的**所有 `<li>` 元素，除了最后一个之外**，以便给它们添加一个底部分隔线，而最后一个 `<li>` 不需要。请你用至少**两种**不同的 CSS 选择器（伪类）来实现这个需求。

18. **(实现对话框箭头)** 想象一个常见的聊天气泡或工具提示框（Tooltip），它除了主体矩形外，通常还会有一个指向目标的小三角箭头。如果让你只用一个 `div` 和 CSS 来实现这个效果，你会如何利用伪元素（比如 `::before` 或 `::after`）和 `border` 属性来“画”出这个三角形？请描述一下你的实现思路。

19. **(Grid 与 `clamp()`)** 我们来结合一下 Grid 和现代 CSS 函数。如果我想创建一个响应式网格，它的列宽是流式的，但我希望列与列之间的**间距 (`gap`)** 也能在某个范围内（比如 `1rem` 到 `2rem` 之间）平滑地缩放，而不是固定的值。你会如何使用 `clamp()` 函数来实现这个“流式间距”？请写出 `gap` 属性的示例值。

---

**面试官**：好的，非常深入。我相信通过这些问题，我们对你的 CSS 能力已经有了一个非常全面的了解。你展现了扎实的理论基础、丰富的实践经验和对前沿技术的关注。
