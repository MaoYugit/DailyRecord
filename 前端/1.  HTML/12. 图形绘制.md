### **第三节：图形绘制**

首先，理解`<canvas>`和`<svg>`最核心的区别至关重要：

| 特性         | `<canvas>` (画布)                                            | `<svg>` (可伸缩矢量图形)                                     |
| :----------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| **本质**     | **位图 (Bitmap)**。它就像一块画布，一旦图形被画上去，就变成了像素点，无法再被单独操作。 | **矢量图 (Vector)**。它通过XML文档来描述图形（如“画一个圆心在(50,50)，半径为20的红色圆形”）。 |
| **绘制方式** | 依赖 **JavaScript** API 来绘制。HTML只负责创建画布。         | 使用 **XML标签** (如`<circle>`, `<rect>`) 来定义图形，也可以被JS操作。 |
| **缩放表现** | 放大后会**失真、模糊**（马赛克现象）。                       | 无论如何缩放，都**保持清晰**，因为它是基于数学公式重新渲染的。 |
| **事件处理** | 不支持。你无法直接为画布上绘制的一个圆形绑定点击事件。       | 支持。SVG中的每个图形元素都是一个DOM节点，可以像`<div>`一样直接绑定事件。 |
| **性能**     | 适合大量图形、像素级操作、动态渲染的场景，如游戏、图像处理、数据可视化。 | 适合图形数量较少、需要高保真度、需要交互的场景，如图标、Logo、图表。 |
| **SEO**      | 不利于SEO，因为搜索引擎无法读取画布上的像素内容。            | 文本内容可以被搜索引擎读取，有利于SEO。                      |

> **简单比喻**：`<canvas>` 就像是 **Photoshop**，操作的是像素；`<svg>` 就像是 **Illustrator**，操作的是独立的形状对象。

---

#### **1. `<canvas>` 标签：通过JavaScript进行2D图形绘制**

`<canvas>` 元素本身只是一个矩形的“画布”容器，它没有任何内容和边框。我们必须使用JavaScript来实际地在上面进行绘制。

##### **HTML部分**

HTML代码非常简单，只需要定义一个带有 `id`、`width` 和 `height` 的 `<canvas>` 标签。

```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <title>Canvas 示例</title>
    <style>
        /* 给 canvas 加个边框方便观察 */
        canvas {
            border: 1px solid black;
        }
    </style>
</head>
<body>
    <h1>我的第一个Canvas绘图</h1>
    <canvas id="myCanvas" width="300" height="150"></canvas>

    <script>
        // JavaScript 代码将写在这里
    </script>
</body>
</html>
```

##### **JavaScript部分**

所有的“魔法”都发生在JavaScript中。

1.  **获取Canvas元素**：首先，我们需要通过DOM API获取到HTML中的`<canvas>`元素。
2.  **获取上下文(Context)**：然后，我们需要调用它的 `getContext()` 方法来获得一个“画笔”对象。对于2D图形，我们传入参数 `"2d"`。
3.  **开始绘制**：之后，我们就可以调用这个上下文对象提供的各种API（如 `fillRect`, `arc`, `stroke`）来绘制图形了。

**示例：绘制一个简单的矩形和圆形**

将下面的JS代码放入上面HTML的 `<script>` 标签内：

```javascript
// 1. 获取Canvas元素
const canvas = document.getElementById('myCanvas');

// 检查浏览器是否支持canvas
if (canvas.getContext) {
    // 2. 获取2D绘图上下文
    const ctx = canvas.getContext('2d');

    // --- 绘制一个红色的矩形 ---
    ctx.fillStyle = 'red'; // 设置填充颜色为红色
    ctx.fillRect(10, 10, 100, 50); // fillRect(x, y, width, height)

    // --- 绘制一个蓝色的描边圆形 ---
    ctx.beginPath(); // 开始一条新路径
    // arc(圆心x, 圆心y, 半径, 起始角度, 结束角度)
    ctx.arc(200, 75, 40, 0, Math.PI * 2); 
    ctx.strokeStyle = 'blue'; // 设置描边颜色为蓝色
    ctx.lineWidth = 3; // 设置线条宽度
    ctx.stroke(); // 执行描边
    
} else {
    // 为不支持canvas的浏览器提供后备内容
    console.log('您的浏览器不支持Canvas！');
}
```

**重点理解**：
HTML的 `<canvas>` 只是创建了一个“画布”。真正定义“画了什么”、“怎么画”的，**全部是JavaScript代码**。这使得Canvas非常灵活和强大，但也意味着它的内容对于非JS环境（如搜索引擎爬虫）是不可见的。

---

#### **2. `<svg>` 可伸缩矢量图形**

与Canvas不同，SVG是通过声明式的XML标签来定义图形的。你可以直接在HTML文件中书写SVG代码。

##### **基本用法**

SVG图形需要被包裹在 `<svg>` 标签内。`width` 和 `height` 属性定义了SVG图像的视窗大小。

**示例：使用SVG标签绘制同样的矩形和圆形**

```html
<h1>我的第一个SVG绘图</h1>
<svg width="300" height="150" style="border: 1px solid black;">
    <!-- 绘制一个红色的矩形 -->
    <rect 
        x="10" 
        y="10" 
        width="100" 
        height="50" 
        fill="red" 
    />

    <!-- 绘制一个蓝色的描边圆形 -->
    <circle 
        cx="200" 
        cy="75" 
        r="40" 
        stroke="blue" 
        stroke-width="3" 
        fill="none" 
    />

    <!-- 你甚至可以在SVG中添加文本 -->
    <text x="120" y="120" fill="green">Hello SVG!</text>
</svg>
```

**重点理解**：

*   SVG的每一个图形（`<rect>`, `<circle>`）都是一个**独立的DOM元素**。
*   你可以像操作 `<div>` 一样，用CSS去改变它们的样式（如 `fill`, `stroke`），用JavaScript去为它们绑定事件监听器。
*   代码是**声明式**的，可读性很高，直接描述了“有什么”，而不是“怎么画”。
*   你可以直接用文本编辑器打开一个 `.svg` 文件，它就是一段XML代码。很多矢量图标（如Font Awesome）就是用SVG实现的。

**本节总结**

我们学习了两种在Web上创建图形的技术，请根据你的需求选择合适的工具：

*   **选择 `<canvas>` 的场景**：
    *   需要高性能的实时动画、游戏。
    *   需要对图像进行像素级的处理（如滤镜、图片合成）。
    *   需要渲染大量的数据点或图形（如复杂的图表、热力图）。

*   **选择 `<svg>` 的场景**：
    *   需要创建高保真、可无限缩放的图形，如Logo、图标。
    *   需要对图形的各个部分进行独立的交互和事件处理。
    *   需要图形内容能够被无障碍工具和搜索引擎访问。

**练习建议**：
1.  **Canvas练习**：在Canvas上尝试绘制你的名字的字母轮廓。这需要你使用 `moveTo()`（移动画笔）和 `lineTo()`（画线）等路径API。
2.  **SVG练习**：尝试用SVG的 `<rect>`, `<circle>`, `<polygon>`（多边形）等标签，组合出一个简单的房子或笑脸图标。
