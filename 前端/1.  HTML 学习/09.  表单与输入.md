### **第五节：表单与输入**

#### **1. `<form>` 表单元素**

`<form>` 标签是所有表单控件的“总容器”。它本身在页面上是不可见的，但它定义了一个区域，浏览器知道这个区域内的所有输入项（如文本框、按钮等）是属于同一个提交单元的。当用户点击“提交”按钮时，`<form>` 会将内部的所有数据打包发送到指定的位置。

##### **`<form>` 的核心属性**

*   **`action`**
    *   **作用**：指定一个URL地址，用于接收和处理表单提交的数据。 这个地址通常是一个后端服务器上的脚本文件（比如一个PHP、Python或Node.js的接口）。
    *   **如果省略**：表单数据将被提交到当前页面的URL。
    *   **示例**:
        ```html
        <form action="/submit-your-data.php">
          <!-- 表单控件会放在这里 -->
        </form>
        ```

*   **`method`**
    *   **作用**：指定用于提交表单数据的 **HTTP方法**。 主要有两种：`GET` 和 `POST`。
    *   **`GET`** (默认值):
        *   它会将表单数据附加到 `action` URL的末尾，以“查询字符串”的形式（`?key1=value1&key2=value2`）。
        *   提交的数据会在浏览器地址栏中**可见**。
        *   不安全，**绝不能**用于提交密码等敏感信息。
        *   有URL长度限制。
        *   **适用场景**：通常用于搜索框、筛选等非敏感、幂等（多次请求结果相同）的操作。
    *   **`POST`**:
        *   它会将表单数据放在HTTP请求的**请求体**中发送，不会显示在URL里。
        *   更安全，适用于发送密码、个人信息等敏感数据。
        *   没有数据大小限制。
        *   **适用场景**：绝大多数情况，如用户注册、登录、发布内容等。

    *   **示例**:
        ```html
        <form action="/login" method="post">
          <!-- 登录表单控件 -->
        </form>
        ```

#### **2. `<label>` 标签：提升表单可用性**

`<label>` 标签用于为一个表单控件（如 `<input>`, `<textarea>` 等）定义标注。 它的作用远不止是显示一段说明文字。

*   **提升可访问性 (Accessibility)**：屏幕阅读器会读出与输入框相关联的 `<label>`，帮助视障用户理解每个输入框的作用。
*   **提升用户体验**：当用户点击 `<label>` 文本时，浏览器会自动将焦点（光标）移动到与之关联的表单控件上。 对于复选框和单选按钮这种小目标，点击标签就能选中，体验会好很多。

**如何关联 `<label>` 和表单控件？** (有两种方式)

1.  **使用 `for` 属性 (推荐)**
    *   给表单控件（如 `<input>`）设置一个唯一的 `id` 属性。
    *   给 `<label>` 设置一个 `for` 属性，其值与对应控件的 `id` **完全相同**。

    ```html
    <label for="username">用户名：</label>
    <input type="text" id="username" name="username">
    ```

2.  **嵌套关联 (隐式)**
    *   将表单控件直接放在 `<label>` 标签内部。这种方式不需要 `for` 和 `id`。

    ```html
    <label>用户名：<input type="text" name="username"></label>
    ```
    > **最佳实践**：始终使用 `for` 和 `id` 的方式。它的关联更明确，结构也更清晰，兼容性最好。

#### **3. 常用的 `<input>` 类型**

`<input>` 标签是最核心、最多变的表单控件，具体形态由其 `type` 属性决定。 它是一个**自闭合标签**。

**通用属性 `name`**：
> 几乎所有的输入控件都应该有一个 `name` 属性。这个 `name` 作为提交数据时的“键”（key），而用户输入的内容则是“值”（value）。如果没有 `name`，这个控件的数据将**不会被提交**。

*   **`type="text"`**: 单行文本输入框。 最常用的输入类型，用于输入姓名、地址等。
    ```html
    <label for="name">姓名：</label>
    <input type="text" id="name" name="name" placeholder="请输入您的姓名">
    ```
    *`placeholder` 属性用于显示输入框内的提示性文字。

*   **`type="password"`**: 密码输入框。输入的内容会自动被掩码（显示为小圆点或星号）。
    
    ```html
    <label for="pwd">密码：</label>
    <input type="password" id="pwd" name="password">
    ```
    
*   **`type="checkbox"`**: 复选框。 允许用户在多个选项中进行**多项选择**。
    *   同一组的复选框应该使用**相同的 `name`**。
    ```html
    <p>您的爱好：</p>
    <input type="checkbox" id="hobby1" name="hobby" value="reading">
    <label for="hobby1">阅读</label>
    <input type="checkbox" id="hobby2" name="hobby" value="music">
    <label for="hobby2">音乐</label>
    ```
    *`value` 属性在这里至关重要，它指定了当此项被选中时，提交到服务器的值。

*   **`type="radio"`**: 单选按钮。 允许用户在多个选项中只进行**一项选择**。
    *   同一组的单选按钮必须使用**完全相同的 `name`**，这样浏览器才知道它们是互斥的。
    ```html
    <p>性别：</p>
    <input type="radio" id="male" name="gender" value="male">
    <label for="male">男</label>
    <input type="radio" id="female" name="gender" value="female">
    <label for="female">女</label>
    ```

*   **`type="submit"`**: 提交按钮。点击后会触发表单的提交动作（将数据发送到 `action` 指定的地址）。
    
    *   `value` 属性定义了按钮上显示的文本。
    ```html
    <input type="submit" value="注册">
    ```
    
*   **`type="button"`**: 普通按钮。 它本身没有任何默认行为，通常需要配合JavaScript来绑定点击事件，执行自定义操作。
    
    ```html
    <input type="button" value="点击我" onclick="alert('你好！')">
    ```
    
*   **`type="file"`**: 文件选择框。 允许用户从本地设备选择一个或多个文件进行上传。
    
    ```html
    <label for="avatar">上传头像：</label>
    <input type="file" id="avatar" name="avatar">
    ```
    
*   **`type="date"`**: 日期选择器。 点击后会弹出一个日历界面供用户选择日期。
    
    ```html
    <label for="birthdate">出生日期：</label>
    <input type="date" id="birthdate" name="birthdate">
    ```
*   **其他HTML5新增类型**: 还有 `email`, `number`, `color`, `range` 等，它们提供了内置的简单验证和更友好的输入界面。

当然！非常好的补充，这些HTML5新增的 `input` 类型极大地增强了表单的功能性和用户体验。让我们来详细地看一看每一个的用法和实例。

---

#### **HTML5新增的Input类型详解**

这些新的输入类型之所以重要，主要有两大优势：

1.  **更好的用户体验**：在移动设备上，浏览器会根据 `type` 类型弹出最合适的键盘（例如，`type="number"` 会弹出数字键盘）。在桌面上，它们会提供更友好的交互控件（如日期选择器、滑块）。
2.  **内置的浏览器验证**：浏览器会自动检查用户输入的数据格式是否符合规范。如果格式不正确，在提交表单时会提示用户，无需我们编写额外的JavaScript代码。

##### **`type="email"`: 邮箱地址**

*   **作用**：专门用于输入电子邮件地址。
*   **特性**：
    *   **验证**：浏览器在提交表单时会自动检查输入的值是否包含 `@` 符号和域名，格式是否基本正确。
    *   **移动端键盘**：在大多数移动设备上，会弹出包含 `@` 和 `.` 字符的专用键盘。
*   **代码示例**：
    ```html
    <form action="/subscribe" method="post">
        <label for="email_addr">订阅我们的资讯：</label>
        <input 
            type="email" 
            id="email_addr" 
            name="email" 
            placeholder="example@domain.com"
            required> <!-- "required" 属性表示此项为必填项 -->
        <button type="submit">订阅</button>
    </form>
    ```
    *在这个例子中，如果用户输入一个不含 `@` 的字符串就尝试提交，浏览器会阻止提交并提示“请输入电子邮件地址”。*

##### **`type="number"`: 数字**

*   **作用**：用于输入数字。
*   **特性**：
    *   **验证**：浏览器会阻止用户输入非数字字符（某些浏览器允许输入 `e` 用于科学计数法）。
    *   **控件**：在桌面浏览器上通常会显示一个上下箭头（spinner）来增加或减少数值。
    *   **移动端键盘**：会弹出数字键盘，方便输入。
*   **常用属性**：
    *   `min`: 允许的最小值。
    *   `max`: 允许的最大值。
    *   `step`: 每次点击箭头时增加或减少的步长（例如 `step="2"` 表示只能输入偶数）。
*   **代码示例**：
    ```html
    <form action="/order" method="post">
        <label for="quantity">购买数量（1-10件）：</label>
        <input 
            type="number" 
            id="quantity" 
            name="quantity" 
            min="1" 
            max="10"
            step="1"
            value="1"> <!-- "value" 属性可以设置默认值 -->
        <button type="submit">加入购物车</button>
    </form>
    ```
    *用户无法输入小于1或大于10的数字，也无法输入非数字字符。*

##### **`type="range"`: 范围滑块**

*   **作用**：用于在一定范围内选择一个数值，当精确的数值不那么重要时（例如音量、亮度调节）。
*   **特性**：
    *   **控件**：总是显示为一个可拖动的滑块。
    *   **属性**：和 `type="number"` 一样，`min`, `max`, `step` 是其核心属性，用于定义滑块的范围和精度。
*   **代码示例**：
    ```html
    <form action="/settings" method="post">
        <label for="volume">音量大小：</label>
        <input 
            type="range" 
            id="volume" 
            name="volume"
            min="0"
            max="100"
            step="10"
            value="50">
    </form>
    ```
    * **注意**：`range` 控件本身不会显示当前的数值。通常需要配合JavaScript来实时显示滑块的值，以提升用户体验。

##### **`type="color"`: 颜色选择器**

*   **作用**：用于选择颜色。
*   **特性**：
    *   **控件**：点击该控件会弹出一个由操作系统或浏览器提供的标准颜色选择器。
    *   **值**：它返回的值是一个7个字符的十六进制颜色代码字符串，例如 `#ff0000` 代表红色。
*   **代码示例**：
    ```html
    <form action="/profile" method="post">
        <label for="fav_color">选择你最喜欢的颜色：</label>
        <input 
            type="color" 
            id="fav_color" 
            name="favorite_color"
            value="#ff0000"> <!-- 设置默认颜色为红色 -->
    </form>
    ```

---

##### **总结与应用**

将这些新的输入类型应用到我们之前的注册表单练习中，可以使它变得更加强大和友好。

**升级版的注册表单练习**：

在上一节的注册表单基础上，我们来做一些优化：

1.  **添加“电子邮箱”字段**：使用 `<input type="email">` 并设为必填。
2.  **添加“年龄”字段**：使用 `<input type="number">`，并用 `min` 和 `max` 属性限制一个合理的年龄范围，比如 18 到 100。
3.  **添加“个人主页颜色”字段**：使用 `<input type="color">`，让用户可以选择一个主题色。

**优化后的部分代码可能如下所示：**

```html
<!-- ...其他表单项... -->

<p>
    <label for="user_email">电子邮箱：</label>
    <input type="email" id="user_email" name="email" required>
</p>
<p>
    <label for="user_age">年龄：</label>
    <input type="number" id="user_age" name="age" min="18" max="100">
</p>
<p>
    <label for="theme_color">主页颜色：</label>
    <input type="color" id="theme_color" name="color" value="#336699">
</p>

<!-- ...提交按钮等... -->
```

通过使用这些语义化的 `input` 类型，你不仅让代码更清晰，更重要的是，你免费获得了由浏览器提供的强大功能和更好的用户体验。在开发表单时，应始终优先选择最符合数据类型的 `input type`。

#### **4. `<textarea>` 多行文本输入框**

当需要用户输入大段文本（如评论、留言、文章）时，使用 `<textarea>`。

*   它不是自闭合标签，默认内容可以放在起始和结束标签之间。
*   **`rows` 和 `cols` 属性**：分别用来控制文本域的可见行数和列数（即高度和宽度），但更推荐使用CSS来控制大小。

```html
<label for="comment">评论：</label><br>
<textarea id="comment" name="comment" rows="5" cols="30" placeholder="请在此处输入您的评论..."></textarea>
```

#### **5. `<select>` 和 `<option>` 下拉选择框**

用于创建下拉菜单，让用户从一个预设的选项列表中进行选择。

*   `<select>` 是选择框的容器。
*   `<option>` 代表下拉菜单中的每一个**选项**。
*   **`value` 属性**：`<option>` 的 `value` 属性是实际提交到服务器的值。如果省略，则提交的是 `<option>` 标签内的文本内容。
*   **`selected` 属性**：为一个 `<option>` 添加 `selected` 属性可以将其设置为默认选中项。

```html
<label for="city">所在城市：</label>
<select id="city" name="city">
    <option value="">--请选择--</option>
    <option value="beijing">北京</option>
    <option value="shanghai" selected>上海</option>
    <option value="shenzhen">深圳</option>
</select>
```

#### **6. `<button>` 按钮**

`<button>` 元素比 `<input type="button">` 更灵活、更推荐使用。

*   **内容更丰富**：`<button>` 是一个容器标签，你可以在其中放入文本、图片甚至其他HTML元素，而 `<input>` 的内容只能是纯文本 `value`。
*   **`type` 属性**：
    *   `type="submit"` (默认值): 功能和 `<input type="submit">` 完全一样，点击后提交表单。
    *   `type="reset"`: 重置按钮，点击后将表单内所有控件恢复到初始值。
    *   `type="button"`: 普通按钮，和 `<input type="button">` 一样，没有默认行为，需要配合JavaScript使用。

```html
<!-- 提交按钮 -->
<button type="submit">
    <img src="icons/submit.png" alt="" width="16"> 提交
</button>

<!-- 重置按钮 -->
<button type="reset">清空重填</button>

<!-- 普通按钮 -->
<button type="button">点我</button>
```

---

**本节总结与练习**

我们学习了构建一个完整表单所需的所有核心元素。

*   **容器**: `<form>` 定义了表单的边界，`action` 和 `method` 是其关键属性。
*   **标注**: `<label>` 通过 `for` 和 `id` 与控件关联，提升体验和可访问性。
*   **输入**: `<input>` 通过 `type` 属性千变万化，`name` 属性是数据提交的关键。
*   **多行文本**: `<textarea>` 用于长文本输入。
*   **下拉选择**: `<select>` 和 `<option>` 组合提供预设选项。
*   **按钮**: `<button>` 是更强大、更推荐的按钮元素。

**动手练习：**
创建一个完整的用户注册表单 (`register.html`)：

1.  使用 `<form>` 标签包裹所有内容，设置 `action="register-success.html"` 和 `method="post"`。
2.  包含以下字段，并为每个字段使用 `<label>` 进行标注：
    *   用户名 (`type="text"`)
    *   密码 (`type="password"`)
    *   确认密码 (`type="password"`)
    *   性别 (一组 `type="radio"` 单选按钮)
    *   爱好 (一组 `type="checkbox"` 复选框)
    *   所在城市 (一个 `<select>` 下拉菜单)
    *   个人简介 (一个 `<textarea>`)
3.  在表单末尾，添加一个 `type="submit"` 的 `<button>` 和一个 `type="reset"` 的 `<button>`。
