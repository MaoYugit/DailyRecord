### **第二节：多媒体支持**

#### **1. `<audio>` 音频播放**

`<audio>` 标签用于在网页中嵌入音频内容。

##### **基本用法**

最简单的方式是使用 `src` 属性直接指定音频文件的路径。

```html
<audio src="music/song.mp3"></audio>
```
然而，如果你在浏览器里打开这个页面，你会发现什么也看不见。这是因为我们没有给它添加播放控件。

##### **添加播放控件**

为了让用户能够控制音频的播放、暂停、调节音量等，我们需要添加 `controls` 属性。这是一个布尔属性，只需要写上属性名即可，不需要赋值。

```html
<audio src="music/song.mp3" controls></audio>
```
现在，浏览器就会显示一个默认样式的音频播放器了。

##### **兼容多种浏览器：使用 `<source>` 标签**

不同的浏览器可能支持不同的音频格式（常见的有 MP3, Ogg, WAV）。为了确保你的音频能在尽可能多的浏览器上播放，最佳实践是提供多种格式的音源，让浏览器自己选择它支持的那一种。

这时，我们就不在 `<audio>` 标签上使用 `src` 属性，而是在其内部使用多个 `<source>` 标签。

*   `<source>` 是一个自闭合标签。
*   `src` 属性：指定音源路径。
*   `type` 属性：告知浏览器这个音源的文件类型（MIME type），让浏览器可以快速判断是否支持，而无需先下载文件。

```html
<audio controls>
  <source src="music/song.mp3" type="audio/mpeg">
  <source src="music/song.ogg" type="audio/ogg">
  您的浏览器不支持 audio 标签，无法播放音频。
</audio>
```**工作原理**：
浏览器会从上到下读取 `<source>` 标签，一旦找到它支持的第一个格式，就会加载并使用它，忽略后面的 `<source>` 标签。如果所有 `<source>` 都不支持，它最后会显示 `<audio>` 标签内部的后备文本，比如 “您的浏览器不支持 audio 标签...”。

#### **2. `<video>` 视频播放**

`<video>` 标签用于在网页中嵌入视频内容，其用法和 `<audio>` 非常相似。

##### **基本用法与控件**

```html
<video src="videos/movie.mp4" controls></video>
```
同样，`controls` 属性会显示浏览器默认的视频播放控件。

##### **设置视频尺寸**

你可以像 `<img>` 标签一样，使用 `width` 和 `height` 属性来设置视频播放器的尺寸。这有助于防止页面在视频加载时出现布局抖动。

```html
<video src="videos/movie.mp4" width="640" height="360" controls></video>
```

##### **兼容多种浏览器：使用 `<source>` 标签**

视频的格式兼容性问题比音频更突出（常见的有 MP4, WebM, Ogg）。因此，为 `<video>` 提供多种源格式是至关重要的。

```html
<video width="640" height="360" controls>
  <source src="videos/movie.mp4" type="video/mp4">
  <source src="videos/movie.webm" type="video/webm">
  您的浏览器不支持 video 标签，无法播放视频。
</video>
```

##### **设置封面图 `poster`**

在视频开始播放前，播放器区域会显示视频的第一帧，有时这可能是一个黑屏。我们可以使用 `poster` 属性指定一张图片作为视频的“封面”或“海报”，让界面更美观。

```html
<video controls poster="images/movie-poster.jpg">
  <source src="videos/movie.mp4" type="video/mp4">
  <!-- ...其他 source... -->
</video>
```

#### **3. 多媒体标签的常用属性**

以下这些属性对于 `<audio>` 和 `<video>` 都是通用的。

*   **`controls`**
    *   **作用**：显示或隐藏浏览器默认的播放控件。为了用户体验，绝大多数情况下都应该加上它。

*   **`autoplay`**
    *   **作用**：尝试在页面加载完成后**自动播放**媒体。
    *   **重要限制**：为了防止打扰用户，现代浏览器对 `autoplay` 施加了严格的限制。**通常，只有在同时设置了 `muted` 属性的情况下，`autoplay` 才会生效**。也就是说，视频可以自动播放，但必须是静音的，需要用户主动去开启声音。
    *   **示例**：常用于网站背景视频。
        ```html
        <video src="background.mp4" autoplay muted loop></video>
        ```

*   **`loop`**
    *   **作用**：让媒体在播放结束后**自动循环**播放。

*   **`muted`**
    *   **作用**：默认将媒体设置为**静音**状态。用户可以手动取消静音。

---

**综合示例**

让我们来看一个功能比较完善的视频播放器代码：

```html
<h2>产品宣传片</h2>

<video 
    width="800" 
    controls 
    muted
    loop
    poster="images/product-poster.png">

    <source src="videos/product-intro.mp4" type="video/mp4">
    <source src="videos/product-intro.webm" type="video/webm">
    <p>
        您的浏览器不支持 HTML5 视频播放。您可以 <a href="videos/product-intro.mp4">点击此处下载视频</a>。
    </p>
</video>
```
这个视频播放器：
1.  有播放控件 (`controls`)。
2.  默认是静音的 (`muted`)。
3.  会自动循环播放 (`loop`)。
4.  在播放前会显示一张海报图 (`poster`)。
5.  提供了两种视频格式 (`.mp4` 和 `.webm`) 以增强兼容性。
6.  为完全不支持的旧浏览器提供了友好的后备文本和下载链接。

**本节总结**

*   使用 `<audio>` 和 `<video>` 标签可以原生嵌入多媒体。
*   始终使用 `controls` 属性提供播放控件。
*   为了兼容性，使用内部的 `<source>` 标签提供多种格式的媒体源。
*   `autoplay` 属性通常需要配合 `muted` 才能生效。
*   `loop` 用于循环播放，`poster` (仅限video) 用于设置封面。

**练习建议**：
1.  从网上找一段简短的 `.mp3` 格式的音频和一段 `.mp4` 格式的视频。
2.  在你的HTML页面中，分别使用 `<audio>` 和 `<video>` 标签将它们嵌入。
3.  为它们添加播放控件、设置循环播放。
4.  为视频找到一张合适的图片作为 `poster` 封面。
5.  **挑战**：尝试在 `autoplay` 和 `muted` 属性的不同组合下，观察媒体的播放行为有什么不同。
