<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>2.screenshot</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body>
    <!-- 1. 全局背景和居中容器：让卡片始终在屏幕正中间 -->
    <div
      class="bg-slate-100 min-h-screen flex items-center justify-center"
      id="screenshot-target"
    >
      <!-- 2. 卡片主题：白色背景，有圆角、边框和阴影 -->
      <div
        class="w-full max-w-xs bg-white border border-gray-200 rounded-xl shadow-lg p-8 space-y-4"
      >
        <!-- 3. 头像：圆形，居中，带一点阴影增加立体感 -->
        <img
          class="w-24 h-24 rounded-full mx-auto shadow-md ring-4 ring-slate-200"
          src="https://randomuser.me/api/portraits/men/32.jpg"
          alt="User avatar"
        />

        <!-- 4. 文本信息：居中对齐，使用不同字号和颜色区分层级 -->
        <div class="text-center">
          <p class="text-2xl font-semibold text-gray-900">John Doe</p>
          <p class="text-gray-500 font-medium">Frontend Developer</p>
        </div>

        <!-- 5. 按钮：占满宽度，有悬停和聚焦效果，提升交互体验 -->
        <div class="flex justify-center">
          <button
            class="block text-center w-40 px-4 py-2 bg-sky-500 text-white rounded-lg font-semibold hover:bg-sky-600 focus:outline-none focus:ring-4 focus:ring-sky-300 transition-all duration-300"
            @click=""
            id="capture-btn"
          >
            Contact Me
          </button>
        </div>
      </div>
    </div>
    <script>
      async function captureScreen() {
        try {
          // 1. 请求用户授权并获取 MediaStream
          const mediaStream = await navigator.mediaDevices.getDisplayMedia({
            video: { cursor: "always" },
            audio: false,
          });

          const track = mediaStream.getVideoTracks()[0];

          // 2. 从视频轨道创建一个图片捕捉器
          const imageCapture = new ImageCapture(track);

          // 3. 抓取一帧
          const bitmap = await imageCapture.grabFrame();

          // 停止视频流
          track.stop();

          // 4. 将抓取到的帧绘制到 Canvas 上
          const canvas = document.createElement("canvas");
          canvas.width = bitmap.width;
          canvas.height = bitmap.height;
          const context = canvas.getContext("2d");
          context.drawImage(bitmap, 0, 0);

          // 5. 将 Canvas 转换为图片并下载
          const imageUrl = canvas.toDataURL("image/png");
          const link = document.createElement("a");
          link.href = imageUrl;
          link.download = "screenshot.png";
          link.click();
        } catch (err) {
          console.error("截图错误: ", err);
        }
      }

      const captureButton = document.getElementById("capture-btn");

      captureButton.addEventListener("click", captureScreen);
    </script>
  </body>
</html>
